(this["webpackJsonpwould-you-rather"]=this["webpackJsonpwould-you-rather"]||[]).push([[0],{36:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(15),s=n.n(a),i=n(12),c=n(5),u=n(23),d=n(10),j=(n(36),n(2)),l="USER_LOGIN",b="USER_LOGOUT",h="ADD_QUESTION",p="ANSWER_QUESTION";function O(e){return{type:l,payload:{userId:e}}}var m="currentUser";function v(){return function(e,t){localStorage.removeItem(m),e({type:b})}}var x=n(1);var f=Object(c.b)((function(e,t){var n=e.users,o=e.questions,r=e.currentUser,a=t.location,s=new URLSearchParams(a.search).get("filter");return console.log("filter: ",s),{questions:Object.keys(o).filter((function(e){return"answered"===s?Object.keys(n[r].answers).includes(e):"unanswered"!==s||!Object.keys(n[r].answers).includes(e)})).map((function(e){var t=e,r={text:o[e].optionOne.text},a={text:o[e].optionTwo.text},s=o[e].timestamp,i={};return i.name=n[o[e].author].name,i.avatarURL=n[o[e].author].avatarURL,{id:t,optionOne:r,optionTwo:a,timestamp:s,author:i}})).sort((function(e,t){return t.timestamp-e.timestamp})),userInfo:{id:r,name:n[r].name,avatarURL:n[r].avatarURL}}}))((function(e){e.userInfo;var t=e.questions;return Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{children:"Questions"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.c,{to:"/questions?filter=answered",children:"Answered"}),Object(x.jsx)(d.c,{to:"/questions?filter=unanswered",children:"Unanswered"}),Object(x.jsx)(d.c,{to:"/questions?filter=all",children:"All"})]}),Object(x.jsx)("div",{children:Object(x.jsx)("ul",{children:t.map((function(e){return Object(x.jsxs)("li",{children:[Object(x.jsxs)("h4",{children:[e.author.name," asks"]}),Object(x.jsxs)("p",{children:["Would you rather "," ",Object(x.jsx)("span",{children:e.optionOne.text})," ","or"," ",Object(x.jsx)("span",{children:e.optionTwo.text})]}),Object(x.jsx)(d.b,{to:"/questions/".concat(e.id),children:"Go to poll"})]},e.id)}))})})]})}));var w=Object(c.b)((function(e){var t=e.users,n=e.currentUser;e.questions;return{isUserSelected:""!==n&&Object.keys(t).includes(n),users:Object.keys(t).map((function(e){return{name:t[e].name,id:t[e].id,avatarURL:t[e].avatarURL}}))}}),(function(e){return{login:function(t){return e(O(t))}}}))((function(e){var t=e.isUserSelected,n=e.users,o=(e.handleLoginPersistance,e.login);return t?Object(x.jsx)(j.a,{to:"/questions"}):Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{children:"Select a user"}),Object(x.jsx)("ul",{children:n.map((function(e){return Object(x.jsxs)("li",{children:[Object(x.jsx)("p",{children:e.name}),Object(x.jsx)("button",{onClick:function(){return o(e.id)},children:"Select this user"})]},e.id)}))})]})})),y=n(4),q=n(24),g=["currentUser","userIds","logout"];var U=Object(c.b)((function(e){return{currentUser:e.currentUser,userIds:Object.keys(e.users)}}),(function(e){return{logout:function(){return e(v())}}}))((function(e){var t=e.currentUser,n=e.userIds,o=e.logout,r=Object(q.a)(e,g);return n.find((function(e){return e===t}))?Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{onClick:o,children:"Logout"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.c,{to:"/questions",children:"Questions"}),Object(x.jsx)(d.c,{to:"/questions/add",children:"Add Question"}),Object(x.jsx)(d.c,{to:"/leaderboard",children:"Leaderboard"})]}),Object(x.jsx)(j.b,Object(y.a)({},r))]}):Object(x.jsx)(j.a,{to:"/"})}));n(41);var T=Object(c.b)((function(e){var t=e.users,n=(e.questions,e.currentUser);return{leaderboard:Object.keys(t).map((function(e){return{name:t[e].name,id:t[e].id,avatarURL:t[e].avatarURL,score:Object.keys(t[e].answers).length+t[e].questions.length}})).sort((function(e,t){return t.score-e.score})),userInfo:{id:n,name:t[n].name,avatarURL:t[n].avatarURL}}}))((function(e){var t=e.leaderboard;return Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{children:"Leaderboard"}),Object(x.jsx)("div",{children:Object(x.jsx)("ol",{children:t.map((function(e){return Object(x.jsxs)("li",{children:[Object(x.jsx)("p",{children:e.name}),Object(x.jsxs)("p",{children:["Score: ",e.score]})]},e.id)}))})})]})})),S=n(44);function L(e,t){return function(n,o){n(function(e){return{type:h,payload:{question:e}}}({id:Object(S.a)().replace("-","").slice(0,22),timestamp:Date.now(),author:o().currentUser,optionOne:{votes:[],text:e},optionTwo:{votes:[],text:t}}))}}var k=Object(c.b)((function(e){var t=e.currentUser,n=e.users;return{userInfo:{id:t,name:n[t].name,avatarURL:n[t].avatarURL}}}),(function(e){return{addQuestion:function(t,n){return e(L(t,n))}}}))((function(e){var t=e.userInfo,n=e.addQuestion;return Object(x.jsxs)("div",{children:[Object(x.jsxs)("h2",{children:["Hello from Add Question Page for user ",t.name]}),Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target.optionOne.value,o=e.target.optionTwo.value;n(t,o)},children:[Object(x.jsx)("input",{type:"text",name:"optionOne",required:!0}),Object(x.jsx)("input",{type:"text",name:"optionTwo",required:!0}),Object(x.jsx)("button",{type:"submit",children:"Add Question"})]})]})}));var R=Object(c.b)((function(e,t){var n=e.users,o=e.questions,r=e.currentUser,a=t.match.params,s={id:r,name:n[r].name,avatarURL:n[r].avatarURL},i=a.id,c={id:"",optionOne:{text:""},optionTwo:{text:""},answerState:0,answerStatitistics:{optionOne:0,optionTwo:0},author:{name:"",avatarURL:"",id:""}},u=Object.keys(o).includes(i);if(u){var d=o[i];switch(c.id=i,c.optionOne.text=d.optionOne.text,c.optionTwo.text=d.optionTwo.text,n[r].answers[i]){case"optionOne":c.answerState=1;break;case"optionTwo":c.answerState=2;break;default:c.answerState=0}var j=o[i].optionOne.votes.length,l=o[i].optionTwo.votes.length,b=j+l;c.answerStatitistics.optionOne=(100*j/b).toFixed(2),c.answerStatitistics.optionTwo=(100*l/b).toFixed(2),c.author.id=n[o[i].author].id,c.author.name=n[o[i].author].name,c.author.avatarURL=n[o[i].author].avatarURL}return{userInfo:s,question:c,isPresent:u}}),(function(e){return{onAnswer:function(t,n,o){return e(function(e,t,n){return{type:p,payload:{questionId:e,userId:t,selectedOption:n}}}(t,n,o))}}}))((function(e){var t=e.isPresent,n=e.userInfo,o=e.question,r=e.onAnswer,a=function(e){r(o.id,n.id,e)},s=null;return s=t?Object(x.jsxs)("div",{children:[Object(x.jsxs)("h4",{children:[o.author.name," asks"]}),Object(x.jsxs)("p",{children:["Would you rather "," ",Object(x.jsxs)("button",{disabled:0!==o.answerState,onClick:function(e){return a("optionOne")},children:[o.optionOne.text,0!==o.answerState&&Object(x.jsxs)("p",{children:[o.answerStatitistics.optionOne,"%"]})]})," ","or"," ",Object(x.jsxs)("button",{disabled:0!==o.answerState,onClick:function(e){return a("optionTwo")},children:[o.optionTwo.text,0!==o.answerState&&Object(x.jsxs)("p",{children:[o.answerStatitistics.optionTwo,"%"]})]})]})]}):Object(x.jsx)("div",{children:"Question not found"}),Object(x.jsxs)("div",{children:["Hello from QuestionDetails Page for user ",n.name,"\n",s]})}));var I=Object(c.b)()((function(e){return Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(j.d,{children:[Object(x.jsx)(j.b,{exact:!0,path:"/",component:w}),Object(x.jsx)(U,{path:"/leaderboard",component:T}),Object(x.jsx)(U,{path:"/questions/add",component:k}),Object(x.jsx)(U,{path:"/questions/:id",component:R}),Object(x.jsx)(U,{path:"/questions",component:f})]})})})),z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),o(e),r(e),a(e),s(e)}))},Q="johndoe";var A=n(11),D=n(16),P={sarahedo:{id:"sarahedo",name:"Sarah Edo",avatarURL:"",answers:{"8xf0y6ziyjabvozdd253nd":"optionOne","6ni6ok3ym7mf1p33lnez":"optionTwo",am8ehyc8byjqgar0jgpub9:"optionTwo",loxhs1bqm25b708cmbf3g:"optionTwo"},questions:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},tylermcginnis:{id:"tylermcginnis",name:"Tyler McGinnis",avatarURL:"",answers:{vthrdm985a262al8qx3do:"optionOne",xj352vofupe1dqz9emx13r:"optionTwo"},questions:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},johndoe:{id:"johndoe",name:"John Doe",avatarURL:"",answers:{xj352vofupe1dqz9emx13r:"optionOne",vthrdm985a262al8qx3do:"optionTwo","6ni6ok3ym7mf1p33lnez":"optionTwo"},questions:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]}};var C={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",author:"sarahedo",timestamp:1467166872634,optionOne:{votes:["sarahedo"],text:"have horrible short term memory"},optionTwo:{votes:[],text:"have horrible long term memory"}},"6ni6ok3ym7mf1p33lnez":{id:"6ni6ok3ym7mf1p33lnez",author:"johndoe",timestamp:1468479767190,optionOne:{votes:[],text:"become a superhero"},optionTwo:{votes:["johndoe","sarahedo"],text:"become a supervillain"}},am8ehyc8byjqgar0jgpub9:{id:"am8ehyc8byjqgar0jgpub9",author:"sarahedo",timestamp:1488579767190,optionOne:{votes:[],text:"be telekinetic"},optionTwo:{votes:["sarahedo"],text:"be telepathic"}},loxhs1bqm25b708cmbf3g:{id:"loxhs1bqm25b708cmbf3g",author:"tylermcginnis",timestamp:1482579767190,optionOne:{votes:[],text:"be a front-end developer"},optionTwo:{votes:["sarahedo"],text:"be a back-end developer"}},vthrdm985a262al8qx3do:{id:"vthrdm985a262al8qx3do",author:"tylermcginnis",timestamp:1489579767190,optionOne:{votes:["tylermcginnis"],text:"find $50 yourself"},optionTwo:{votes:["johndoe"],text:"have your best friend find $500"}},xj352vofupe1dqz9emx13r:{id:"xj352vofupe1dqz9emx13r",author:"johndoe",timestamp:1493579767190,optionOne:{votes:["johndoe"],text:"write JavaScript"},optionTwo:{votes:["tylermcginnis"],text:"write Swift"}}};var E=Object(i.combineReducers)({currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return t.payload.userId;case b:return"";default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:var n=t.payload.question;return Object(y.a)(Object(y.a)({},e),{},Object(A.a)({},n.author,Object(y.a)(Object(y.a)({},e[n.author]),{},{questions:[].concat(Object(D.a)(e[n.author].questions),[n.id])})));case p:var o=t.payload,r=o.questionId,a=o.userId,s=o.selectedOption;return Object(y.a)(Object(y.a)({},e),{},Object(A.a)({},a,Object(y.a)(Object(y.a)({},e[a]),{},{answers:Object(y.a)(Object(y.a)({},e[a].answers),{},Object(A.a)({},r,s))})));default:return e}},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(y.a)(Object(y.a)({},e),{},Object(A.a)({},t.payload.question.id,t.payload.question));case p:var n=t.payload,o=n.questionId,r=n.userId,a=n.selectedOption;return Object(y.a)(Object(y.a)({},e),{},Object(A.a)({},o,Object(y.a)(Object(y.a)({},e[o]),{},Object(A.a)({},a,Object(y.a)(Object(y.a)({},e[o][a]),{},{votes:[].concat(Object(D.a)(e[o][a].votes),[r])})))));default:return e}}}),F=n(25),N=n(26),G=n.n(N),J=Object(i.applyMiddleware)(G.a,F.a),W=Object(i.createStore)(E,Object(u.composeWithDevTools)(J));s.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(c.a,{store:W,children:Object(x.jsx)(d.a,{basename:"/would-you-rather",children:Object(x.jsx)(I,{})})})}),document.getElementById("root")),z()}},[[42,1,2]]]);
//# sourceMappingURL=main.26d08021.chunk.js.map